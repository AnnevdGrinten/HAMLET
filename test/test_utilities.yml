- name: test-variant-table
  tags:
    - functional
    - utilities
  command: >
    python3 utilities/hamlet_table.py
    --version v1
    variant
    test/data/output/v1/SRR8615409.summary.json
  stdout:
    contains:
      # The variant table headers
      - "sample\tGene\tCHROM\tPOS"
      - "SRR8615409\tNRAS\tchr1\t114716123"

- name: test-fusion-table
  tags:
    - functional
    - utilities
  command: >
    python3 utilities/hamlet_table.py
    --version v1
    fusion
    test/data/output/v1/SRR8615409.summary.json
  stdout:
    contains:
      # The variant table headers
      - "sample\tjr_count\tname"
      - "SRR8615409\t33\tSFPQ--ZFP36L1"
      - "SRR8615409\t15\tSFPQ--ZFP36L1"

- name: test-overexpression-table
  tags:
    - functional
    - utilities
  command: >
    python3 utilities/hamlet_table.py
    --version v1
    overexpression
    test/data/output/v1/SRR8615409.summary.json
  stdout:
    contains:
      # The variant table headers
      - "sample\texon\tdivisor_gene"
      - "SRR8615409\tMECOM:169146722-169147734\tHMBS"


- name: test-reference-files-dry-run
  tags:
    - dry-run
    - hamlet
  command: >
    snakemake -n
    --snakefile utilities/deps/Snakefile
    --reason
    --printshellcmds
    --verbose
