- name: Test dry run of expression module
  tags:
    - dry-run
    - expression
  command: >
    snakemake
    --snakefile includes/expression/Snakefile
    --workflow-profile test
    --dry-run
    --configfile test/data/config/expression.json
    --config pepfile=test/pep/expression.csv

- name: Test error on unknown housekeeping gene
  tags:
    - sanity
    - expression
  command: >
    snakemake
    --snakefile includes/expression/Snakefile
    --workflow-profile test
    --dry-run
    --configfile test/data/config/expression.json
    --config pepfile=test/pep/expression.csv
             housekeeping="Z"
  exit_code: 1
  stdout:
    contains:
      - "Unknown housekeeping gene: Z"

- name: Test error on duplicate names
  tags:
    - sanity
    - expression
  command: >
    snakemake
    --snakefile includes/expression/Snakefile
    --workflow-profile test
    --dry-run
    --configfile test/data/config/expression.json
    --config pepfile=test/pep/expression.csv
             housekeeping="Z"
  exit_code: 1
  stdout:
    contains:
      - "Unknown housekeeping gene: Z"
