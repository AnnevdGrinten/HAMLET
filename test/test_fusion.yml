- name: test-fusion-dry-run-single
  tags:
    - dry-run
  command: >
    snakemake -n
    --snakefile includes/fusion/Snakefile
    --configfile test/data/config/test-dry-run-single.config
  stdout:
    contains:
      - "Job counts:"
      - "TestSample/fusion/TestSample.star-fusion"
      - "TestSample/fusion/TestSample.star-fusion-circos/fsnviz.svg"
      - "TestSample/fusion/TestSample.star-fusion-circos/fsnviz.png"

- name: test-fusion-dry-run-trio
  tags:
    - dry-run
  command: >
    snakemake -n
    --snakefile includes/fusion/Snakefile
    --configfile test/data/config/test-dry-run-trio.config
  stdout:
    contains:
      - "Job counts:"
      - "TestSample1/fusion/TestSample1.star-fusion"
      - "TestSample1/fusion/TestSample1.star-fusion-circos/fsnviz.svg"
      - "TestSample1/fusion/TestSample1.star-fusion-circos/fsnviz.png"
      - "TestSample2/fusion/TestSample2.star-fusion"
      - "TestSample2/fusion/TestSample2.star-fusion-circos/fsnviz.svg"
      - "TestSample2/fusion/TestSample2.star-fusion-circos/fsnviz.png"
      - "TestSample3/fusion/TestSample3.star-fusion"
      - "TestSample3/fusion/TestSample3.star-fusion-circos/fsnviz.svg"
      - "TestSample3/fusion/TestSample3.star-fusion-circos/fsnviz.png"

- name: test-fusion-sanity-snakemake
  tags:
    - sanity
  command: >
    snakemake --version
  stdout:
    contains:
      - "5.9"

- name: test-fusion-sanity-singularity
  tags:
    - sanity
  command: >
    singularity --version
  stdout:
    contains:
      - "singularity version 3.1"
