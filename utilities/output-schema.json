{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Schema of the output from the HAMLET pipeline",
  "definitions": {
    "metadata": {
      "type": "object",
      "additionalProperties": false,
      "minProperties": 4,
      "properties": {
        "genes_of_interest": {
          "type": "array",
          "items": { "$ref": "#/definitions/metadata/gene_of_interest" }
        },
        "pipeline_version": { "type": "string" },
        "run_name": { "type": "string" },
        "sample_name": { "type": "string" }
      },
      "gene_of_interest": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 3,
        "properties": {
          "gene_id": { "type": "string" },
          "gene_symbol": { "type": "string" },
          "transcript_ids": {
            "type": "array",
            "items": { "type": "string" }
          }
        }
      }
    },
    "results": {
      "type": "object",
      "additionalProperties": false,
      "minProperties": 4,
      "properties": {
        "expr": {
          "type": "array",
          "items": { "$ref": "#/definitions/results/expression" }
        },
        "fusion": { "$ref": "#/definitions/results/fusion" },
        "itd": { "$ref": "#/definitions/results/itd" },
        "var": { "$ref": "#/definitions/results/var" }
      },
      "expression": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 7,
        "properties": {
          "above_threshold": { "type": "string" },
          "count": { "type": "string" },
          "divisor_exp": { "type": "string" },
          "divisor_gene": { "type": "string" },
          "exon": { "type": "string"},
          "ratio": { "type": "string"},
          "sample_name": { "type": "string" }
        }
      },
      "fusion": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 3,
        "properties": {
          "intersected": { "type": "boolean" },
          "plots": { "$ref": "#/definitions/results/fusion/plot" },
          "tables": { "$ref": "#/definitions/results/fusion/tables" }
        },
        "plot": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "fusioncatcher": { "type": "string" },
            "intersection": { "type": "string" },
            "star-fusion": { "type": "string" }
          }
        },
        "tables": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "fusioncatcher": { "$ref": "#/definitions/results/fusion/table" },
            "intersection": { "$ref": "#/definitions/results/fusion/table" },
            "star-fusion": { "$ref": "#/definitions/results/fusion/table" }
          }
        },
        "table": {
          "type": "object",
          "additionalProperties": false,
          "minProperties": 2,
          "properties": {
            "path": { "type": "string" },
            "top20": {
              "type": "array",
              "items": { "$ref": "#/definitions/results/fusion/event" }
            }
          }
        },
        "event": {
          "type": "object",
          "additionalProperties": false,
          "minProperties": 4,
          "properties": {
            "jr_count": { "type": "string" },
            "name": { "type": "string" },
            "sf_count": { "type": "string"},
            "type": {
              "type": "string",
              "enum": ["ONLY_REF_SPLICE", "INCL_NON_REF_SPLICE"]
            }
          }
        }
      },
      "itd": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 2,
        "properties": {
          "flt3": { "$ref": "#/definitions/results/itd/result" },
          "kmt2a": { "$ref": "#/definitions/results/itd/result" }
        },
        "result": {
          "type": "object",
          "additionalProperties": false,
          "minProperties": 2,
          "properties": {
            "path": { "type": "string" },
            "table": {
              "type": "array",
              "items": { "$ref": "#/definitions/results/itd/event" }
            }
          }
        },
        "event": {
          "type": "object",
          "additionalProperties": false,
          "minProperties": 10,
          "properties": {
            "boundary_type": { "type": "string" },
            "fuzziness": { "type": "string" },
            "rose_end_anchor_pos": { "type": "string" },
            "rose_end_count": { "type": "string" },
            "rose_end_pos": { "type": "string" },
            "rose_start_anchor_pos": { "type": "string" },
            "rose_start_count": { "type": "string" },
            "rose_start_pos": { "type": "string" },
            "td_ends": { "type": "string" },
            "td_starts": { "type": "string" }
          }
        }
      },
      "var": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 2,
        "properties": {
          "overview": { "$ref": "#/definitions/results/overview" },
          "plots": {
            "type": "array",
            "items": { "$ref": "#/definitions/results/geneplot" }
          }
        }
      },
      "overview": {
        "type": "object",
        "additionalProperties": { "$ref": "#/definitions/results/gene" }
      },
      "gene": {
        "type": "array",
        "items": { "$ref": "#/definitions/results/variant" }
      },
      "variant": {
        "type": "object",
        "properties": {
          "HGVSc": { "type": "string" },
          "HGVSp": { "type": "string" },
          "Existing_variation": { "type": "string" },
          "FREQ": { "type": "string" },
          "is_in_hotspot": { "type": "string" },
          "PVAL": { "type": "string" }
        },
        "required": [
          "HGVSc",
          "HGVSp",
          "Existing_variation",
          "FREQ",
          "is_in_hotspot",
          "PVAL"
        ]
      },
      "geneplot": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 2,
        "properties": {
          "gene": { "type": "string" },
          "path": { "type": "string" }
        }
      }
    }
  },
  "additionalProperties": false,
  "minProperties": 3,
  "type": "object",
  "properties": {
    "metadata": { "$ref": "#/definitions/metadata" },
    "results": { "$ref": "#definitions/results" },
    "stats": { "type": "object" }
  }
}
